@model WebDuLichDev.Models.LoginModel

@{
    ViewBag.Title = "Log in";
    Layout = "~/Views/Shared/_Layout.cshtml";
    
}
@Styles.Render("~/Content/style_login3d.css")


<section class="main">
    @using (Html.BeginForm("Login","Account", new { ReturnUrl = ViewBag.ReturnUrl },FormMethod.Post, new { @class = "form-2" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
      
        if (!ViewData.ModelState.IsValid)
        { 
         <div id="messageBox" class="alert ">
            <a class="close" data-dismiss="alert">×</a>
             @Html.ValidationMessage("LoginErr")                   
        </div>
        }
        <h1><span class="log-in">Log in</span> or <span class="sign-up">sign up</span></h1>
        <p class="float">
            <label for="login"><i class="icon-user"></i>Username</label>
            @*<input type="text" name="LoginModel.UserName" placeholder="Username or email">*@
            @Html.TextBoxFor(m=>m.UserName,new {placeholder="Username or email"})
        </p>
        <p class="float">
            <label for="password"><i class="icon-lock"></i>Password</label>
            @*<input type="password" name="Password" placeholder="Password" class="showpassword">*@
            @Html.PasswordFor(m=>m.Password,new { placeholder="Password", @class="showpassword"})
        </p>
        <p class="clearfix">
            <a href="@Url.Action("ExternalLoginsList", new { ReturnUrl = ViewBag.ReturnUrl })" class="log-twitter">Log in with Social</a>
            <input type="submit" name="submit" value="Log in">
        </p>
    }
    ​​
</section>
@*<section id="loginForm">
<h2>Use a local account to log in.</h2>
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) {
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Log in Form</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.UserName)
                @Html.TextBoxFor(m => m.UserName)
                @Html.ValidationMessageFor(m => m.UserName)
            </li>
            <li>
                @Html.LabelFor(m => m.Password)
                @Html.PasswordFor(m => m.Password)
                @Html.ValidationMessageFor(m => m.Password)
            </li>
            <li>
                @Html.CheckBoxFor(m => m.RememberMe)
                @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
            </li>
        </ol>
        <input type="submit" value="Log in" />
    </fieldset>
    <p>
        @Html.ActionLink("Register", "Register") if you don't have an account.
    </p>
}
</section>*@

@*<section class="social" id="socialLoginForm">
    @Html.Action("ExternalLoginsList", new { ReturnUrl = ViewBag.ReturnUrl })
</section>*@

<script type="text/javascript">
    $(function () {
        $(".showpassword").each(function (index, input) {
            var $input = $(input);
            $("<p class='opt'/>").append(
                $("<input type='checkbox' class='showpasswordcheckbox' id='showPassword' />").click(function () {
                    var change = $(this).is(":checked") ? "text" : "password";
                    var rep = $("<input placeholder='Password' type='" + change + "' />")
                        .attr("id", $input.attr("id"))
                        .attr("name", $input.attr("name"))
                        .attr('class', $input.attr('class'))
                        .val($input.val())
                        .insertBefore($input);
                    $input.remove();
                    $input = rep;
                })
            ).append($("<label for='showPassword'/>").text("Show password")).insertAfter($input.parent());
        });

        $('#showPassword').click(function () {
            if ($("#showPassword").is(":checked")) {
                $('.icon-lock').addClass('icon-pencil');
                $('.icon-pencil').removeClass('icon-lock');
            } else {
                $('.icon-pencil').addClass('icon-lock');
                $('.icon-lock').removeClass('icon-pencil');
            }
        });
    });
</script>